
NVAPI_INTERFACE	EQU	<extern NvAPI_Status __cdecl>

NvU64 typedef QWORD
NvS32 typedef DWORD

NvU32 typedef DWORD
NvU16 typedef WORD
NvU8 typedef  BYTE


NVAPI_DEFAULT_HANDLE	                 EQU	0
NVAPI_GENERIC_STRING_MAX	             EQU	4096
NVAPI_LONG_STRING_MAX	                 EQU	256
NVAPI_SHORT_STRING_MAX	               EQU	64

NVAPI_MAX_PHYSICAL_GPUS	               EQU	64
NVAPI_MAX_LOGICAL_GPUS	               EQU	64
NVAPI_MAX_AVAILABLE_GPU_TOPOLOGIES	   EQU	256
NVAPI_MAX_GPU_TOPOLOGIES	             EQU	<NVAPI_MAX_PHYSICAL_GPUS>
NVAPI_MAX_GPU_PER_TOPOLOGY	           EQU	8
NVAPI_MAX_DISPLAY_HEADS	               EQU	2
NVAPI_MAX_DISPLAYS	                   EQU	NVAPI_MAX_PHYSICAL_GPUS * NVAPI_MAX_DISPLAY_HEADS
NV_MAX_HEADS	                         EQU	4
NV_MAX_VID_STREAMS	                   EQU	4
NV_MAX_VID_PROFILES	                   EQU	4


NVAPI_MAX_THERMAL_SENSORS_PER_GPU	     EQU	3

NV_THERMAL_TARGET typedef DWORD
NVAPI_THERMAL_TARGET_NONE = 0 
NVAPI_THERMAL_TARGET_GPU = 1 
NVAPI_THERMAL_TARGET_MEMORY = 2 
NVAPI_THERMAL_TARGET_POWER_SUPPLY = 4 
NVAPI_THERMAL_TARGET_BOARD = 8 
NVAPI_THERMAL_TARGET_ALL = 15 
NVAPI_THERMAL_TARGET_UNKNOWN = - 1 

NV_THERMAL_CONTROLLER typedef DWORD     
NVAPI_THERMAL_CONTROLLER_NONE = 0 
NVAPI_THERMAL_CONTROLLER_GPU_INTERNAL = 1
NVAPI_THERMAL_CONTROLLER_ADM1032 = 2
NVAPI_THERMAL_CONTROLLER_MAX6649 = 3
NVAPI_THERMAL_CONTROLLER_MAX1617 = 4
NVAPI_THERMAL_CONTROLLER_LM99 = 5
NVAPI_THERMAL_CONTROLLER_LM89 = 6
NVAPI_THERMAL_CONTROLLER_LM64 = 7
NVAPI_THERMAL_CONTROLLER_ADT7473 = 8
NVAPI_THERMAL_CONTROLLER_SBMAX6649 = 9
NVAPI_THERMAL_CONTROLLER_VBIOSEVT = 10
NVAPI_THERMAL_CONTROLLER_OS = 11
NVAPI_THERMAL_CONTROLLER_UNKNOWN = - 1 


NV_DECLARE_HANDLE macro name
  exitm <name typedef DWORD>
	endm
	
NV_DECLARE_HANDLE( NvDisplayHandle)
NV_DECLARE_HANDLE( NvUnAttachedDisplayHandle)
NV_DECLARE_HANDLE( NvLogicalGpuHandle)
NV_DECLARE_HANDLE( NvPhysicalGpuHandle)
NV_DECLARE_HANDLE( NvEventHandle)


NvAPI_String struct
	SBYTE NVAPI_GENERIC_STRING_MAX dup (?)
NvAPI_String ends

NvAPI_LongString struct
	SBYTE NVAPI_LONG_STRING_MAX dup (?)
NvAPI_LongString ends

NvAPI_ShortString struct
	SBYTE NVAPI_SHORT_STRING_MAX dup (?)  ;?
NvAPI_ShortString ends


NV_DISPLAY_DRIVER_VERSION	struct 
  version	NvU32	?
  drvVersion	NvU32	?
  bldChangeListNum	NvU32	?
  szBuildBranchString	NvAPI_ShortString	<>
  ;szBuildBranchString BYTE NVAPI_SHORT_STRING_MAX dup (?)
  szAdapterString	NvAPI_ShortString	<>
  ;szAdapterString BYTE NVAPI_SHORT_STRING_MAX dup (?)
NV_DISPLAY_DRIVER_VERSION	ends


sensorstruct struct 
  controller	NV_THERMAL_CONTROLLER	?
  defaultMinTemp	NvU32	?
  defaultMaxTemp	NvU32	?
  currentTemp	NvU32	?
  target	NV_THERMAL_TARGET	?
sensorstruct ends

NV_GPU_THERMAL_SETTINGS	struct 
  version	NvU32	?
  count	NvU32	?
  sensor sensorstruct NVAPI_MAX_THERMAL_SENSORS_PER_GPU dup(<>)
NV_GPU_THERMAL_SETTINGS	ends


NvAPI_Status typedef DWORD
NVAPI_OK = 0 
NVAPI_ERROR = - 1 
NVAPI_LIBRARY_NOT_FOUND = - 2 
NVAPI_NO_IMPLEMENTATION = - 3 
NVAPI_API_NOT_INTIALIZED = - 4 
NVAPI_INVALID_ARGUMENT = - 5 
NVAPI_NVIDIA_DEVICE_NOT_FOUND = - 6 
NVAPI_END_ENUMERATION = - 7 
NVAPI_INVALID_HANDLE = - 8 
NVAPI_INCOMPATIBLE_STRUCT_VERSION = - 9 
NVAPI_HANDLE_INVALIDATED = - 10 
NVAPI_OPENGL_CONTEXT_NOT_CURRENT = - 11 
NVAPI_NO_GL_EXPERT = - 12 
NVAPI_INSTRUMENTATION_DISABLED = - 13 
NVAPI_EXPECTED_LOGICAL_GPU_HANDLE = - 100 
NVAPI_EXPECTED_PHYSICAL_GPU_HANDLE = - 101 
NVAPI_EXPECTED_DISPLAY_HANDLE = - 102 
NVAPI_INVALID_COMBINATION = - 103 
NVAPI_NOT_SUPPORTED = - 104 
NVAPI_PORTID_NOT_FOUND = - 105 
NVAPI_EXPECTED_UNATTACHED_DISPLAY_HANDLE = - 106 
NVAPI_INVALID_PERF_LEVEL = - 107 
NVAPI_DEVICE_BUSY = - 108 
NVAPI_NV_PERSIST_FILE_NOT_FOUND = - 109 
NVAPI_PERSIST_DATA_NOT_FOUND = - 110 
NVAPI_EXPECTED_TV_DISPLAY = - 111 
NVAPI_EXPECTED_TV_DISPLAY_ON_DCONNECTOR = - 112 
NVAPI_NO_ACTIVE_SLI_TOPOLOGY = - 113 
NVAPI_SLI_RENDERING_MODE_NOTALLOWED = - 114 
NVAPI_EXPECTED_DIGITAL_FLAT_PANEL = - 115 
NVAPI_ARGUMENT_EXCEED_MAX_SIZE = - 116 
NVAPI_DEVICE_SWITCHING_NOT_ALLOWED = - 117 
NVAPI_TESTING_CLOCKS_NOT_SUPPORTED = - 118 
NVAPI_UNKNOWN_UNDERSCAN_CONFIG = - 119 
NVAPI_TIMEOUT_RECONFIGURING_GPU_TOPO = - 120 
NVAPI_DATA_NOT_FOUND = - 121 
NVAPI_EXPECTED_ANALOG_DISPLAY = - 122 
NVAPI_NO_VIDLINK = - 123 
NVAPI_REQUIRES_REBOOT = - 124 
NVAPI_INVALID_HYBRID_MODE = - 125 
NVAPI_MIXED_TARGET_TYPES = - 126 
NVAPI_SYSWOW64_NOT_SUPPORTED = - 127 
NVAPI_IMPLICIT_SET_GPU_TOPOLOGY_CHANGE_NOT_ALLOWED = - 128 
NVAPI_REQUEST_USER_TO_CLOSE_NON_MIGRATABLE_APPS = - 129 
NVAPI_OUT_OF_MEMORY = - 130 
NVAPI_WAS_STILL_DRAWING = - 131 
NVAPI_FILE_NOT_FOUND = - 132 
NVAPI_TOO_MANY_UNIQUE_STATE_OBJECTS = - 133 
NVAPI_INVALID_CALL = - 134 
NVAPI_D3D10_1_LIBRARY_NOT_FOUND = - 135 
NVAPI_FUNCTION_NOT_FOUND = - 136 


;function protos

NvAPI_Initialize proto C
NvAPI_GetErrorMessage proto C :NvAPI_Status, :DWORD

NvAPI_GetDisplayDriverVersion proto C  :NvDisplayHandle, :ptr NV_DISPLAY_DRIVER_VERSION
NvAPI_EnumNvidiaDisplayHandle proto C :NvU32, :ptr NvDisplayHandle

NvAPI_EnumPhysicalGPUs proto C :ptr NvPhysicalGpuHandle, :ptr NvU32
NvAPI_GetPhysicalGPUsFromDisplay proto C :NvDisplayHandle, :ptr NvPhysicalGpuHandle, :ptr NvU32

NvAPI_GPU_GetThermalSettings proto  C :NvPhysicalGpuHandle, :NvU32, :ptr NV_GPU_THERMAL_SETTINGS




